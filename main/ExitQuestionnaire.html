{{ block title }}
Exit Questionnaire
{{ endblock }}

{{ block styles }}
<link href="https://unpkg.com/survey-jquery@1.12.18/defaultV2.min.css" rel="stylesheet">
<style>
    .exit-card {
        max-width: 900px;
        border: 1px solid #d6d9dd;
    }

    .sv-root-modern .sv-btn {
        background-color: #0d6efd;
        color: #fff;
    }
</style>
{{ endblock }}

{{ block content }}
<div class="card exit-card shadow-sm mx-auto">
    <div class="card-body p-4">
        <div id="surveyContainer"></div>
    </div>
</div>

<input type="hidden" id="surveyResults" name="surveyResults" value="">
{{ endblock }}

{{ block scripts }}
<script src="https://unpkg.com/jquery@3.7.1/dist/jquery.min.js"></script>
<script src="https://unpkg.com/survey-jquery@1.12.18/survey.jquery.min.js"></script>
<script>
    const survey = new Survey.Model(js_vars.survey_json);
    Survey.StylesManager.applyTheme("bootstrap");
    survey.showCompletedPage = false;

    survey.onComplete.add(function (sender) {
        document.getElementById('surveyResults').value = JSON.stringify(sender.data);
        document.getElementById('form').submit();
    });

    $("#surveyContainer").Survey({model: survey});
</script>
{{ endblock }}
